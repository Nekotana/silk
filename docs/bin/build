#!/bin/bash -ex

if [[ -z "$APIDOC_SOURCE_FILES" ]]; then
  APIDOC_SOURCE_FILES=" \
    ../sdk/interface/silk-alog.js \
    ../sdk/interface/silk-movie.js \
    ../sdk/interface/silk-properties.js \
    ../bsp-gonk/vendor/silk/silk-input/lib/index.js \
    ../bsp-gonk/vendor/silk/silk-ntp/lib/index.js \
    ../bsp-gonk/vendor/silk/silk-sysutils/lib/index.js \
    ../bsp-gonk/vendor/silk/silk-vibrator/lib/index.js \
    ../bsp-gonk/vendor/silk/silk-wifi/lib/index.js \
    ../bsp-gonk/vendor/silk/silk-battery/lib/index.js \
  "
fi

cd $(dirname $0)/..
./node_modules/.bin/documentation \
  build \
  $APIDOC_SOURCE_FILES \
  --project-version master \
  -f html \
  -o dist/api/device \
  -t node_modules/documentation-theme-default \
  --name silk-device-api

du -hs dist/api/device
